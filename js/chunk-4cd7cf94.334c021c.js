(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4cd7cf94"],{"23d6":function(t,a,s){"use strict";s.r(a);var r=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("ScrollTop"),s("Navbar"),s("router-view"),s("RemoveModal")],1)},e=[],n=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-light shadow"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._m(0),s("router-link",{staticClass:"logo navbar-brand mr-0 mr-md-3",attrs:{to:"/"}}),s("div",{staticClass:"d-flex order-md-1 navbar-icon align-items-end"},[s("router-link",{staticClass:"nav-link py-3",attrs:{to:"/favorite",href:"#"}},[s("i",{staticClass:"fas fa-heart fa-lg"})]),s("div",{staticClass:"dropdown cart"},[s("button",{staticClass:"dropdown btn nav-link py-3",attrs:{type:"button","data-toggle":"dropdown",disabled:t.disable}},[s("i",{staticClass:"fas fa-cart-arrow-down fa-lg"}),0!==t.carts.carts.length?s("span",{staticClass:"cart-badge badge badge-pill badge-danger"},[t._v(t._s(t.carts.carts.length))]):t._e()]),s("div",{staticClass:"dropdown-menu dropdown-menu-right",on:{click:function(a){return t.clickHandler(a)}}},[0!==t.carts.carts.length?s("div",{staticClass:"cart-product-wrap"},[s("div",{staticClass:"mx-2 text-right"},[s("button",{staticClass:"btn btn-sm btn-danger",attrs:{type:"button"},on:{click:function(a){return t.removeCart()}}},[t._v(" 全部清空 ")])]),t._l(t.carts.carts,(function(a){return s("div",{key:a.id,staticClass:"cart-product"},[s("router-link",{attrs:{to:"/product/"+a.id}},[0!=Object.keys(t.carts.carts).length?s("div",{staticClass:"cart-product-img bg-cover",style:{backgroundImage:"url("+a.imageUrl+")"}}):t._e()]),s("div",{staticClass:"product-price ml-2 px-2"},[s("h5",{staticClass:"text-truncate product-title"},[t._v(" "+t._s(a.title)+" ")]),s("div",{staticClass:"clearfix"},[s("span",[t._v(t._s(a.qty)+" x ")]),s("span",[t._v("NT"+t._s(t._f("currency")(a.price)))]),s("div",{staticClass:"ml-3 float-right"},[s("span",{staticClass:"h6 text-highlight"},[t._v("NT"+t._s(t._f("currency")(a.price*a.qty))+" ")]),s("a",{staticClass:"removeCart",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.removeCart(a.id)}}},[s("i",{staticClass:"far fa-trash-alt fa-lg"})])])])])],1)})),s("div",{staticClass:"cart-total d-flex justify-content-between p-2"},[s("span",[t._v("總計")]),t.carts.total===t.carts.finalTotal?s("span",{staticClass:"h5 text-highlight"},[t._v(" NT"+t._s(t._f("currency")(t.carts.finalTotal))+" ")]):s("del",{staticClass:"h6"},[t._v(" NT"+t._s(t._f("currency")(t.carts.total))+" ")])]),t.carts.total!==t.carts.finalTotal?s("div",{staticClass:"cart-total d-flex justify-content-between p-2"},[s("span",{staticClass:"h5 text-highlight"},[t._v("折扣後")]),s("span",{staticClass:"h5 text-highlight"},[t._v(" NT"+t._s(t._f("currency")(t.carts.finalTotal))+" ")])]):t._e()],2):s("div",{staticClass:"cart-product-wrap m-1"},[s("h4",{staticClass:"text-center"},[t._v("購物車尚未有商品喔")])]),s("div",{staticClass:"px-2"},[0!==t.carts.carts.length?s("router-link",{staticClass:"btn btn-sm btn-primary btn-block",attrs:{to:"/checkout"}},[t._v("結帳去")]):s("router-link",{staticClass:"btn btn-sm btn-highlight btn-block",attrs:{to:"/products"}},[t._v("去逛逛")])],1)])])],1),s("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarItem","data-toggle":"collapse","data-target":".collapse.show"}},[s("ul",{staticClass:"navbar-nav mr-auto"},[s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/"}},[s("i",{staticClass:"fas fa-home"}),t._v(" 首頁")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/products"}},[s("i",{staticClass:"fas fa-utensils"}),t._v(" 美味餐點")])],1),s("li",{staticClass:"nav-item"},[s("router-link",{staticClass:"nav-link",attrs:{to:"/login"}},[s("i",{staticClass:"fas fa-users"}),t._v(" 後臺管理員")])],1)])])],1)},i=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"navbar-toggler p-1",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarItem","aria-controls":"navbarItem","aria-expanded":"false","aria-label":"Toggle navigation"}},[s("span",{staticClass:"navbar-toggler-icon"})])}],o={data:function(){return{disable:!1,isLoading:!1,carts:JSON.parse(localStorage.getItem("tempCarts"))||{carts:[],total:0,finalTotal:0}}},methods:{signout:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/logout");t.$http.post(a).then((function(a){a.data.success&&t.$router.push("/login")}))},removeCart:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.$bus.$emit("removeCarts",t)},enableDropdown:function(){var t=this.$route.params.orderId?this.$route.params.orderId:"";"/checkout"===this.$route.path||this.$route.path==="/payment/".concat(t)?this.disable=!0:this.disable=!1},clickHandler:function(t){t.stopPropagation()}},created:function(){var t=this;t.$bus.$on("updateCarts",(function(){t.carts=JSON.parse(localStorage.getItem("tempCarts"))||{carts:[],total:0,finalTotal:0}})),t.enableDropdown()},watch:{$route:function(t,a){this.enableDropdown()}}},l=o,c=s("2877"),d=Object(c["a"])(l,n,i,!1,null,null,null),u=d.exports,v=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),s("div",{staticClass:"modal fade",attrs:{id:"removeCartsModal",tabindex:"-1",role:"dialog","aria-labelledby":"removeCartsModal","aria-hidden":"true"},on:{click:function(a){return t.clickHandler(a)}}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(0),s("div",{staticClass:"modal-body"},[t.removeOne?s("div",[t._v(" 確認要刪除 "),s("strong",{staticClass:"h4 text-highlight word-wrap-break"},[t._v(t._s(t.removePd.title))]),t._v(" 嗎?(刪除後將無法恢復) ")]):s("div",[t._v(" 確認要刪除"),s("strong",{staticClass:"h4 text-highlight"},[t._v("所有商品")]),t._v("嗎?(刪除後將無法恢復) ")])]),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v(" 取消 ")]),s("button",{staticClass:"btn btn-danger confirm",attrs:{type:"button"},on:{click:function(a){return t.removeCart(t.id)}}},[t._v(" 確認 ")])])])])])],1)},f=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"modal-header bg-danger text-white"},[s("h5",{staticClass:"modal-title"},[t._v("刪除商品")]),s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}],p=(s("c740"),s("a434"),s("7db0"),s("1157")),m=s.n(p),g={data:function(){return{isLoading:!1,carts:JSON.parse(localStorage.getItem("tempCarts"))||{carts:[],total:0,finalTotal:0},removePd:{},removeOne:!1,id:""}},methods:{removeCart:function(){var t=this;if(t.isLoading=!0,m()("#removeCartsModal").modal("hide"),t.id){var a=t.carts.carts.findIndex((function(a){return a.id===t.id})),s=t.carts.carts[a].title,r=t.carts.carts[a].price*t.carts.carts[a].qty;t.carts.total-=r,t.carts.finalTotal-="coupon"in t.carts?Math.floor(r*t.carts.coupon.percent):r,t.carts.carts.splice(a,1),t.$bus.$emit("message:push","已將 ".concat(s," 於購物車刪除"),"success"),localStorage.setItem("tempCarts",JSON.stringify(t.carts))}else localStorage.removeItem("tempCarts"),t.$bus.$emit("message:push","已清空購物車");t.$bus.$emit("updateCarts"),t.isLoading=!1},clickHandler:function(t){t.stopPropagation()}},created:function(){var t=this;t.$bus.$on("updateCarts",(function(){t.carts=JSON.parse(localStorage.getItem("tempCarts"))||{carts:[],total:0,finalTotal:0}})),t.$bus.$on("removeCarts",(function(a){t.id=a,""!==a?(t.removeOne=!0,t.removePd=t.carts.carts.find((function(t){return t.id===a}))):t.removeOne=!1,m()("#removeCartsModal").modal("show")}))}},h=g,b=Object(c["a"])(h,v,f,!1,null,null,null),C=b.exports,_=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"scrollTop",attrs:{id:"scrollButton"},on:{click:t.scrollToTop}},[s("i",{staticClass:"fas fa-2x fa-angle-double-up"})])},k=[],w={data:function(){return{}},methods:{scrollToTop:function(){m()("html, body").animate({scrollTop:0},1e3)}},mounted:function(){m()(window).scroll((function(){m()(window).scrollTop()>600?m()("#scrollButton").fadeIn():m()("#scrollButton").fadeOut()}))}},y=w,x=Object(c["a"])(y,_,k,!1,null,null,null),$=x.exports,T={components:{ScrollTop:$,Navbar:u,RemoveModal:C}},I=T,O=Object(c["a"])(I,r,e,!1,null,null,null);a["default"]=O.exports},"7db0":function(t,a,s){"use strict";var r=s("23e7"),e=s("b727").find,n=s("44d2"),i="find",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{find:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),n(i)},c740:function(t,a,s){"use strict";var r=s("23e7"),e=s("b727").findIndex,n=s("44d2"),i="findIndex",o=!0;i in[]&&Array(1)[i]((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{findIndex:function(t){return e(this,t,arguments.length>1?arguments[1]:void 0)}}),n(i)}}]);
//# sourceMappingURL=chunk-4cd7cf94.334c021c.js.map