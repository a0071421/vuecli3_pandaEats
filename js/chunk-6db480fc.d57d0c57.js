(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6db480fc"],{"5af5":function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"container mt-4"},[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(i){t.isLoading=i}}}),0===t.favoritePds.length?e("div",[e("div",{staticClass:"text-center"},[e("h3",{staticClass:"py-4"},[t._v("目前沒有關注的商品哦")]),e("router-link",{staticClass:"btn btn-primary",attrs:{to:"/products"}},[t._v("趕快去看看")])],1)]):e("div",[e("h2",{staticClass:"text-center"},[t._v("我的最愛清單")]),e("div",{staticClass:"row mt-4"},t._l(t.favoritePds,(function(i){return e("div",{key:i.id,staticClass:"col-lg-4 col-md-6 col-sm-6 mb-4"},[e("div",{staticClass:"product card border-0 h-100 position-relative text-decoration-none",on:{click:function(e){return t.getSpecifiedProduct(i.id)}}},[e("div",{staticClass:"bg-cover",staticStyle:{height:"150px"},style:{backgroundImage:"url("+i.imageUrl+")"}}),e("div",{staticClass:"card-body"},[e("div",{staticClass:"d-flex justify-content-between"},[e("span",{staticClass:"badge badge-highlight text-white"},[t._v(t._s(i.category))]),e("div",[t.isFavorite(i.id)?e("a",{staticClass:"like-icon",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.removeFavorite(i)}}},[e("i",{staticClass:"fas fa-heart fa-lg"})]):t._e()])]),e("h5",{staticClass:"card-title font-weight-bold text-ellipsis"},[e("a",{attrs:{href:"#"}},[t._v(t._s(i.title))])]),e("p",{staticClass:"card-text text-dark text-ellipsis"},[t._v(" "+t._s(i.content)+" ")]),e("div",{staticClass:"d-flex justify-content-between align-items-center"},[e("div",{staticClass:"price"},[i.price&&!i.origin_price?e("div",{staticClass:"h5 text-highlight"},[t._v(" NT"+t._s(t._f("currency")(i.price))+" 元 ")]):t._e(),i.origin_price?e("del",{staticClass:"h6"},[t._v("NT"+t._s(t._f("currency")(i.origin_price))+" 元")]):t._e(),i.origin_price?e("div",{staticClass:"h5 text-highlight"},[t._v(" NT"+t._s(t._f("currency")(i.price))+" 元 ")]):t._e()]),e("button",{staticClass:"btn btn-cart btn-outline-primary d-flex justify-content-center align-items-center",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.addtoCart(i)}}},[t.status.addtoCart!==i.id?e("i",{staticClass:"fas fa-cart-plus fa-lg"}):t._e(),t.status.addtoCart===i.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()])])]),e("button",{staticClass:"btn btn-block btn-outline-highlight",attrs:{type:"button"},on:{click:function(e){return t.getSpecifiedProduct(i.id)}}},[t.status.loadingItem===i.id?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v(" 查看更多 ")])])])})),0)])],1)},s=[],r=(e("c740"),e("a9e3"),e("99af"),e("4de4"),{data:function(){return{isLoading:!1,favoritePds:[],pagination:{},status:{loadingItem:"",addtoCart:""},carts:JSON.parse(localStorage.getItem("tempCarts"))||[]}},methods:{getSpecifiedProduct:function(t){this.$router.push("/product/".concat(t)).catch((function(){}))},addtoCart:function(t){var i=this;i.isLoading=!1,i.status.addtoCart=t.id;var e=i.carts.findIndex((function(i){return i.id===t.id}));if(-1===e){var a=Number("origin_price"in t===!0?t.origin_price:t.price),s={id:t.id,qty:1,title:t.title,imageUrl:t.imageUrl,origin_price:t.origin_price,price:a,total:1*a,final_total:1*a};i.carts.push(s)}else i.carts[e].qty++,i.carts[e].total+=i.carts[e].price,i.carts[e].final_total+=i.carts[e].price;localStorage.setItem("tempCarts",JSON.stringify(i.carts)),i.$bus.$emit("message:push","已將 ".concat(t.title," 加入購物車"),"success"),i.$bus.$emit("updateCarts"),i.isLoading=!1,i.status.addtoCart=""},removeCart:function(t){var i=this,e="".concat("https://vue-course-api.hexschool.io","/api/").concat("neil0907","/cart/").concat(t);i.isLoading=!0,i.$http.delete(e).then((function(){i.isLoading=!1,i.getCarts()}))},removeFavorite:function(t){var i=this;i.favoritePds=i.favoritePds.filter((function(i){return i.id!==t.id})),localStorage.setItem("favorite",JSON.stringify(i.favoritePds)),i.$bus.$emit("message:push","已取消收藏","success")},isFavorite:function(t){var i=this;return i.favoritePds.some((function(i){return i.id===t}))}},created:function(){this.favoritePds=JSON.parse(localStorage.getItem("favorite"))||[]},components:{}}),n=r,c=e("2877"),o=Object(c["a"])(n,a,s,!1,null,null,null);i["default"]=o.exports},"99af":function(t,i,e){"use strict";var a=e("23e7"),s=e("d039"),r=e("e8b5"),n=e("861d"),c=e("7b0b"),o=e("50c4"),d=e("8418"),l=e("65f0"),u=e("1dde"),f=e("b622"),p=e("2d00"),g=f("isConcatSpreadable"),v=9007199254740991,h="Maximum allowed index exceeded",C=p>=51||!s((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),_=u("concat"),b=function(t){if(!n(t))return!1;var i=t[g];return void 0!==i?!!i:r(t)},m=!C||!_;a({target:"Array",proto:!0,forced:m},{concat:function(t){var i,e,a,s,r,n=c(this),u=l(n,0),f=0;for(i=-1,a=arguments.length;i<a;i++)if(r=-1===i?n:arguments[i],b(r)){if(s=o(r.length),f+s>v)throw TypeError(h);for(e=0;e<s;e++,f++)e in r&&d(u,f,r[e])}else{if(f>=v)throw TypeError(h);d(u,f++,r)}return u.length=f,u}})},c740:function(t,i,e){"use strict";var a=e("23e7"),s=e("b727").findIndex,r=e("44d2"),n="findIndex",c=!0;n in[]&&Array(1)[n]((function(){c=!1})),a({target:"Array",proto:!0,forced:c},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),r(n)}}]);
//# sourceMappingURL=chunk-6db480fc.d57d0c57.js.map